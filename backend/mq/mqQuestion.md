# MQ 問題

- [MQ 問題](#mq-問題)
  - [常見問題](#常見問題)
    - [Q1. 使用 MQ 的場景](#q1-使用-mq-的場景)
    - [Q2. 為何要選用 Kafka,它的優點是?](#q2-為何要選用-kafka它的優點是)

## 常見問題

### Q1. 使用 MQ 的場景

1. 異步處理
   在系統之間傳遞消息，從而使系統之間的解耦，提高系統的性能和可擴展性。這種架構適用於高併發、高可靠性的系統。 - Example: 紅利點數給點機制 - 說明: 當用戶完成任務後,需要給予一定的紅利點數回饋,但由於發放紅利點數需要時間，可以將資料傳送到 MQ 的隊列中，由消費者消費消息，進行紅利點數發放。

2. 流量削峰
   當系統的訪問量突然變大時，使用 MQ 可以將請求暫存到消息隊列中，減少直接打到後端的請求數量，從而達到減少服務器負載的效果。 - Example: 用戶扣款後的通知功能 - 說明: 每月用戶批次扣款時會有大量的交易資料在同一時間運作,使用 MQ 可以透過多個 Cosumer 分工執行減清 server 負擔
3. 系統解耦
   當系統中存在多個服務，且這些服務之間存在相互調用的情況時，使用 MQ 可以將這些調用轉換為消息的發送和接收，減少服務之間的直接依賴關係，提高系統的可維護性和可擴展性。 - Example: 電商網站的訂單系統與通知系統的解耦 - 說明: 電商網站需要通知用戶買家的訂單已經發貨時，可以通過消息隊列來實現 - 當訂單發生變化時，訂單系統將消息發送到消息隊列，消息隊列再將消息轉發給通知系統 - 實現了訂單系統和通知系統的解耦，減少了系統之間的相互影響

4. 日誌收集
   使用 MQ 可以將系統的日誌寫入到消息隊列中，再由日誌系統將日誌收集起來，方便進行統計和分析。

5. 推送通知
   當需要對多個客戶端推送消息時，使用 MQ 可以將消息發送到消息隊列中，再由客戶端訂閱消息進行接收，從而達到推送通知的目的。

### Q2. 為何要選用 Kafka,它的優點是?

Kafka 是一個高效、分佈式的消息系統，適用於大型的消息處理。它提供了高吞吐量、低延遲、可擴展性和容錯性，同時還具有可靠的數據儲存和持久化特性。

- 高吞吐量和低延遲
  Kafka 的消息傳遞速度非常快，能夠以極高的速率處理大量消息。
- 分布式架構和高可用性
  Kafka 采用分布式架構，可提供高可用性和容錯性，並且能夠在集群中動態擴展和縮小節點數量。
- 擴展性
  Kafka 可以輕鬆擴展以處理更多的消息和流量，並且支持多個消費者群組，可滿足不同的需求。
- 消息持久性
  Kafka 可以將消息持久存儲，保證消息不會因為系統故障或網路中斷而丟失。

社區支持：Kafka 社區非常活躍，有大量的第三方庫和工具可供使用，而且社區中有很多的使用案例和文檔可供參考。
